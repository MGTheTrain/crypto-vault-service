# api-v1

- **Encryption and Decryption of files**: For encryption or decryption, we expect the file to be uploaded as multipart/form-data and the file content will be processed based on the specified encryption/decryption algorithm (e.g. AES or RSA).
- **Hashing of files**: Hashing a file is useful for ensuring file integrity. This can be done using algorithms like SHA-256 or MD5. The resulting hash can be used to verify if the file was modified or corrupted.
- **Signature Verification**: When verifying a file signature, the system compares the provided signature (signed by a private key) with the file content using a public key (e.g. RSA).

---

| **Method** | **Endpoint**                        | **Description**                                                                                                      | **Request Body** (Multipart/Form-Data)                                                                                                                                                               | **Response**                                                    |
|------------|-------------------------------------|----------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
| **POST**   | `/api/v1/blobs`                    | Upload a blob with optional encryption and/or hashing enabled.                                                     | `encryption_algorithm: AES <br> encryption_key_id: encryptionKey123 <br> hash_algorithm: SHA-256 <br> hash_key_id: hashKey123 <br> file: <multipart-form-data>`                                                                                         | `{ "blob_id": "123", "name": "file1.txt", "date_time_created": "2024-11-01T10:00:00Z", "date_time_updated": "2024-11-01T10:00:00Z", "encryption_key_id": "encryptionKey123", "hash_key_id": "hashKey123" }` |
| **GET**    | `/api/v1/blobs/{blob_id}`                | Download the blob by its ID.                                                                                          | None                                                                                                                                                                                           | `{ "file": <blob-data> }`                                          |
| **GET**    | `/api/v1/blobs/{blob_id}/meta`           | Retrieve metadata associated with a blob by its ID.                                                                  | None                                                                                                                                                                                           | `{ "blob_id": "123", "name": "file1.txt", "date_time_created": "2024-11-01T10:00:00Z", "date_time_updated": "2024-11-01T10:00:00Z", "encryption_key_id": "encryptionKey123", "hash_key_id": "hashKey123" }` |
| **DELETE** | `/api/v1/blobs/{blob_id}`                | Delete a blob by its ID.                                                                                             | None                                                                                                                                                                                           | `{ "message": "Blob deleted successfully" }`                   |
| **PUT**    | `/api/v1/blobs/{blob_id}`                | Update an existing blob with new content, metadata, or re-encrypt it.                                                | `encryption_algorithm: AES <br> encryption_key_id: encryptionKey123 <br> hash_algorithm: SHA-256 <br> hash_key_id: hashKey123 <br> file: <multipart-form-data>`                                                                                         | `{ "blob_id": "123", "name": "file1.txt", "date_time_created": "2024-11-01T10:00:00Z", "date_time_updated": "2024-11-01T10:30:00Z", "encryption_key_id": "encryptionKey123", "hash_key_id": "hashKey123" }` |
| **POST**   | `/api/v1/keys`                      | Create a new key in the KeyVault.                                                                                     | `name: example-key <br> algorithm: RSA <br> key_size: 2048`                                                                                                                                  | `{ "key_id": "key123", "name": "example-key", "status": "created" }` |
| **GET**    | `/api/v1/keys/{key_id}`             | Retrieve an existing key from the KeyVault by its ID.                                                                | None                                                                                                                                                                                           | `{ "key_id": "key123", "name": "example-key", "algorithm": "RSA", "key_size": 2048 }` |
| **GET**    | `/api/v1/keys`                      | List all keys stored in the KeyVault.                                                                                 | None                                                                                                                                                                                           | `{ "keys": [ { "key_id": "key123", "name": "example-key", "algorithm": "RSA", "key_size": 2048 }, ... ] }` |
| **PUT**    | `/api/v1/keys/{key_id}/rotate`      | Rotate (update) the key with a new version in the KeyVault.                                                          | None                                                                                                                                                                        | `{ "key_id": "key123", "status": "rotated", "new_version": "2" }` |
| **DELETE** | `/api/v1/keys/{key_id}`             | Delete a key from the KeyVault by its ID.                                                                             | None                                                                                                                                                                                           | `{ "message": "Key deleted successfully" }`                   |